<style>
.dataTables_filter{
    float: right;
}
.dataTables_filter input{
    height: 35px;
}
.dataTables_wrapper .dataTables_paginate .paginate_button {
    box-sizing: border-box;
    display: inline-block;
    min-width: 1.5em;
    padding: 0.5em 1em;
    margin-left: 2px;
    text-align: center;
    text-decoration: none !important;
    cursor: pointer;
    *cursor: hand;
    color: #333 !important;
    border: 1px solid transparent;
    border-radius: 2px;
}
.dataTables_wrapper .dataTables_paginate .paginate_button.current, .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
    color: #333 !important;
    background-color: #eeeeee;
    .dataTables_wrapper .dataTables_paginate .paginate_button.disabled,.dataTables_wrapper .dataTables_paginate .paginate_button.disabled: hover,.dataTables_wrapper .dataTables_paginate .paginate_button.disabled:active{cursor:default;
    color: #666 !important;
    border: 1px solid transparent;
    background: transparent;
    box-shadow: none}.dataTables_wrapper .dataTables_paginate .paginate_button:hover{color:white !important;
    border: 1px solid #111;
    background-color: #585858;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #585858), color-stop(100%, #111));
    background: -webkit-linear-gradient(top, #585858 0%, #111 100%);
    background: -moz-linear-gradient(top, #585858 0%, #111 100%);
    background: -ms-linear-gradient(top, #585858 0%, #111 100%);
    background: -o-linear-gradient(top, #585858 0%, #111 100%);
    background: linear-gradient(to bottom, #585858 0%, #111 100%)}.dataTables_wrapper .dataTables_paginate .paginate_button:active{outline:none;
    background-color: #2b2b2b;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2b2b2b), color-stop(100%, #0c0c0c));
    background: -webkit-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -moz-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -ms-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -o-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: linear-gradient(to bottom, #2b2b2b 0%, #0c0c0c 100%);
    box-shadow: inset 0 0 3px #111}.dataTables_wrapper .dataTables_paginate .ellipsis{padding:0 1em}.dataTables_wrapper .dataTables_processing{position:absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 40px;
    margin-left: -50%;
    margin-top: -25px;
    padding-top: 20px;
    text-align: center;
    font-size: 1.2em;
    background-color: white;
    background: -webkit-gradient(linear, left top, right top, color-stop(0%, rgba(255,255,255,0)), color-stop(25%, rgba(255,255,255,0.9)), color-stop(75%, rgba(255,255,255,0.9)), color-stop(100%, rgba(255,255,255,0)));
    background: -webkit-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,0.9) 75%, rgba(255,255,255,0) 100%);
    background: -moz-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,0.9) 75%, rgba(255,255,255,0) 100%);
    background: -ms-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,0.9) 75%, rgba(255,255,255,0) 100%);
    background: -o-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,0.9) 75%, rgba(255,255,255,0) 100%);
    background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 25%, rgba(255,255,255,0.9) 75%, rgba(255,255,255,0) 100%)}.dataTables_wrapper .dataTables_length,.dataTables_wrapper .dataTables_filter,.dataTables_wrapper .dataTables_info,.dataTables_wrapper .dataTables_processing,.dataTables_wrapper .dataTables_paginate{color:#333}.dataTables_wrapper .dataTables_scroll{clear:both}.dataTables_wrapper .dataTables_scroll div.dataTables_scrollBody{*margin-top:-1px;
    -webkit-overflow-scrolling: touch}.dataTables_wrapper .dataTables_scroll div.dataTables_scrollBody th,.dataTables_wrapper .dataTables_scroll div.dataTables_scrollBody td{vertical-align:middle}.dataTables_wrapper .dataTables_scroll div.dataTables_scrollBody th>div.dataTables_sizing,.dataTables_wrapper .dataTables_scroll div.dataTables_scrollBody td>div.dataTables_sizing{height:0;
    overflow: hidden;
    margin: 0 !important;
    padding: 0 }.dataTables_wrapper.no-footer .dataTables_scrollBody{border-bottom:1px solid #111}.dataTables_wrapper.no-footer div.dataTables_scrollHead table,.dataTables_wrapper.no-footer div.dataTables_scrollBody table{border-bottom:none}.dataTables_wrapper:after{visibility:hidden !important;
    display: block;
    content: "";
    clear: both;
    height: 0}@media screen and (max-width: 767px){.dataTables_wrapper .dataTables_info,.dataTables_wrapper .dataTables_paginate{float:none;
    text-align: center}.dataTables_wrapper .dataTables_paginate{margin-top:0.5em}}@media screen and (max-width: 640px){.dataTables_wrapper .dataTables_length,.dataTables_wrapper .dataTables_filter{float:none;
    text-align: center}.dataTables_wrapper .dataTables_filter{margin-top:0.5em};
}
.dataTables_wrapper .dataTables_paginate .paginate_button {
    box-sizing: border-box;
    display: inline-block;
    min-width: 1.5em;
    padding: 0.5em 1em;
        padding-top: 0.5em;
    margin-left: 2px;
    text-align: center;
    text-decoration: none !important;
    cursor: pointer;
    *cursor: hand;
    color: #333 !important;
    border: 1px solid transparent;
    border-radius: 2px;
}

</style>
<h2 class="page-title"><?= $title ?> <small>Cash4Cats System</small></h2>
<div class="col-md-12 row">
                <section class="widget">
                 <?php if ($this->session->flashdata('notice')) {
                            echo('<span class="label label-important">' . $this->session->flashdata('notice'));
                 } ?></span>
                    <header>
                        <h4>
                            <i class="fa fa-calendar"></i>
                            Calendar
                        </h4>
                        <div class="actions">
                        </div>
                    </header>
                    <div class="body">
                        <div id="datatable-table_wrapper" class="dataTables_wrapper form-inline no-footer">
                       <table id="datatable-table" class="table table-striped table-hover dataTable no-footer" role="grid" aria-describedby="datatable-table_info">
                        <thead>
                        <tr role="row">
                        <th class="sorting_desc" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Id: activate to sort column descending" style="width:20%">Customer</th>
                        <th class="" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Id: activate to sort column descending" style="width:20%">Visit Frequency</th>
                        <th class="hidden-xs sorting" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width:20%">Last Visit</th>
                        <th class="hidden-xs sorting" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width:20%">Operations</th>
                        </tr>
                        </thead>
                        <tbody>

                        <?php if ($customers == false) {
                            echo('<span class="label label-important">Make sure you have been assigned customers</span><br /><br />');
                        } else {
                            $counter = 1;
                            foreach ($customers as $customer) {
                                echo ('<tr role="row" class="odd">
                            <td class="sorting_1">');
                                echo $customer->business_name;
                                echo ('</td>
                            <td class="sorting_1">');
                                echo $customer->visit_frequency;
                                echo ('</td>
                            <td><span class="fw-semi-bold">');
                                echo '<form action="' . site_url() . '/pages/update_date" method="post" ><input type="text" name="lastvisit" id="lastvisit" class="form-control input-lg" value="';
                                echo $customer->next_visit;
                                echo '" />';
                                echo ('</span></td>
                            <td><span class="fw-semi-bold">');
                                echo '<input type="hidden" name="count" value="' . $counter . '" />';
                                echo '<input type="hidden" name="customer_id" value="' . $customer->id . '" />';
                                echo '<input type="submit" value="Update Last Visit" class="btn btn-success inv-button" style="background-color:#13a148"></form></a>';
                                echo ('</span></td></tr>');

                                $counter++;
                            } // end loop
                        } //end if
                        ?>

                       </tbody>

                        </table>
                    </div>
                    </div>
                </section>
            </div>

<?php if ($this->session->userdata('user_type') == 'admin') : ?>
            <div class="col-md-12 row">
                            <section class="widget">
                             <?php if ($this->session->flashdata('expenses')) {
                                        echo('<span class="label label-important">' . $this->session->flashdata('expenses'));
                             } ?></span>
                                <header>
                                    <h4>
                                        <i class="fa fa-usd"></i>
                                        Expenses
                                    </h4>
                                    <div class="actions">
                                    </div>
                                </header>
                                <div class="body">
                                    <div id="datatable-table_wrapper" class="dataTables_wrapper form-inline no-footer">
                                   <table id="datatable-table2" class="table table-striped table-hover dataTable no-footer" role="grid" aria-describedby="datatable-table_info">
                                    <thead>
                                    <tr role="row">
                                    <th class="sorting_desc" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Id: activate to sort column descending" style="width:20%">Payee</th>
                                    <th class="" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Id: activate to sort column descending" style="width:20%">Phone</th>
                                    <th class="hidden-xs sorting" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width:20%">Payment Frq (Days)</th>
                                    <th class="hidden-xs sorting" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width:20%">Next Payment</th>
                                    <th class="hidden-xs sorting" tabindex="0" aria-controls="datatable-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width:20%">Operations</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    <?php if ($expenses == false) {
                                        echo('<span class="label label-important">Make sure you have entered contacts</span><br /><br />');
                                    } else {
                                        $counter = 1;
                                        foreach ($expenses as $expense) {
                                            echo ('<tr role="row" class="odd">
                                        <td class="sorting_1">');
                                            echo $expense->name;
                                            echo ('</td>
                                        <td class="sorting_1">');
                                            echo $expense->phone;
                                            echo ('</td>
                                        <td><span class="fw-semi-bold">');
                                            echo ('<form action="');
                                            echo site_url() . '/pages/update_expense_date" method="post">';
                                            echo $expense->payment_freq;
                                            echo ('</span></td><td>');
                                            echo $expense->payment_next;
                                            echo ('</td><td><span class="fw-semi-bold">');
                                            echo '<input type="hidden" name="expense_id" value="' . $expense->id . '" />';
                                            echo '<input type="hidden" name="frequency" value="' . $expense->payment_freq . '" />';
                                            echo '<input type="hidden" name="last_payment" value="' . $expense->payment_next . '" />';
                                            echo '<input type="submit" value="Update Last Payment" class="btn btn-success inv-button" style="background-color:#13a148"></form></a>';
                                            echo ('</span></td></tr>');
                                        } // end loop
                                    } //end if
                                    ?>

                                   </tbody>

                                    </table>
                                </div>
                                </div>
                            </section>
                        </div>
<?php endif; ?>

    </div>
</div>

<script type="text/javascript">
    $(window).load(function(){
        $('#datatable-table').DataTable({
        "order": [[ 2, "desc" ]]
    });

    $('#datatable-table2').DataTable({
    "order": [[ 3, "desc" ]]
    });

    $('.form-control').datetimepicker({format: 'DD/MM/YYYY'});
    });

</script>
